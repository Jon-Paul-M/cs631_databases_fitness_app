-- This i where the ddl will go

DROP TABLE ADDRESS IF EXISTS;
DROP TABLE TITLE IF EXISTS;
DROP TABLE PERSON IF EXISTS;

CREATE TABLE ADDRESS (
    ADDRESS_ID     BIGINT GENERATED BY DEFAULT AS IDENTITY,
    PRIMARY KEY (ADDRESS_ID)
);


CREATE TABLE TITLE (
    TITLE_ID       BIGINT GENERATED BY DEFAULT AS IDENTITY,
    TITLE          VARCHAR(32)   NOT NULL,
    PRIMARY KEY (TITLE_ID)
);


CREATE TABLE PERSON (
    PERSON_ID      BIGINT GENERATED BY DEFAULT AS IDENTITY,
    FIRST_NAME     VARCHAR(512)  NOT NULL,
    LAST_NAME      VARCHAR(512)  NOT NULL,
    MIDDLE_NAME    VARCHAR(512),
    PHONE          VARCHAR(64),
    SSN            VARCHAR(32)   NOT NULL,
    SUFFIX         VARCHAR(16),
    ADDRESS_ID     BIGINT,
    TITLE_ID       BIGINT,
    PRIMARY KEY (PERSON_ID)
);

ALTER TABLE PERSON 
    ADD CONSTRAINT UK_PERSON_SSN UNIQUE (SSN);
ALTER TABLE PERSON 
    ADD CONSTRAINT FK_PERSON_ADDRESS_ID 
    FOREIGN KEY (ADDRESS_ID) 
    REFERENCES ADDRESS (ADDRESS_ID);
ALTER TABLE PERSON
    ADD CONSTRAINT FK_PERSON_TITLE_ID 
    FOREIGN KEY (TITLE_ID)
    REFERENCES TITLE (TITLE_ID);
